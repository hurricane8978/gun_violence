---
title: "join data"
author: "Xinyuan Liu"
date: "11/30/2021"
output: html_document
---

```{r}
unemploy = 
  read_csv("Unemployment.csv") %>% 
  separate(label, into = c("year", "month")) %>% 
  filter(year != "2017")
 
unemploy = dplyr::rename(unemploy, state = series_id)

gun_violence = 
  read_csv("data/year_month_state_massshooting.csv") %>% 
  mutate(year = year + 2000) %>% 
  mutate(year = as.character(year))

new_dataframe = 
  right_join(unemploy, gun_violence, by = c("state" = "state", "year" = "year", "month" = "month")) %>% 
  select(-...1, -period) %>% 
   mutate(time = paste(year, month))

new_dataframe %>% 
  mutate(
    month = factor(month, level = month.abb),
    time = as.factor(time),
    time = fct_reorder(time)) 

 
  
```

